# フェーズ1：市場概観の把握

## 目的

個別銘柄の詳細な分析に入る前に、分析対象である日本株式市場全体のトレンド、規模感、構造をマクロな視点で把握する。このフェーズで得られた知見は、後続の分析フェーズにおける客観的な基準の設定（例：スクリーニング閾値）や、個別銘柄のパフォーマンスを評価する際のベンチマークとして活用する。

---

## 分析項目

以下の観点から市場を可視化し、概観を把握する。

### 1. TOPIXの時系列分析

- **目的**: 市場全体のパフォーマンスを示す代表的なベンチマークの動向を把握する。
- **実装方針**:
    - `JQuantsClient.get_topix()` を使用してTOPIXの日次データを取得する。
    - `altair` を使用し、終値の折れ線グラフを作成して時系列の変動を可視化する。
- **対応ノートブック**: `notebooks/03_市場分析/10_TOPIX推移.py`

### 2. 全銘柄 時価総額合計の推移分析

- **目的**: 株式市場全体の規模（価値の総和）が時系列でどのように変化してきたかを把握する。TOPIX（配当を含まない株価指数）の動きと、実際の市場全体の価値の動きを比較する。
- **実装方針**:
    - 全銘柄の日次株価データと、日次調整済みの発行済株式数を読み込む。
    - 日毎に全銘柄の時価総額を合計する。
    - 計算結果を折れ線グラフで可視化する。可能であれば、TOPIXの推移と重ねて表示し、両者の乖離などを確認する。
- **対応ノートブック**: `notebooks/03_市場分析/20_全銘柄時価総額_推移.py`

### 3. 全銘柄 時価総額の分布分析

- **目的**: 最新時点での市場の構造を把握する。特に、どのような規模の企業（大型株、中型株、小型株）がどれくらいの数存在するのかを理解する。
- **実装方針**:
    - 最新の株価データから全銘柄の時価総額を計算する。
    - `altair` を使用し、ヒストグラムを作成して時価総額の分布を可視化する。時価総額は裾の重い分布となるため、対数スケールでの表示も行う。
    - パーセンタイル値（例: 上位1%、10%、50%など）を計算し、市場の階層構造を定量的に把握する。
- **対応ノートブック**: `notebooks/03_市場分析/30_全銘柄時価総額_分布.py`

### 4. 時価総額階層別のリターン・ボラティリティ分析

- **目的**: 企業の規模（大型株、中型株、小型株）によって、株価の変動率（リスク）やリターンにどのような違いがあるかを把握する。これにより、「小型株の方がハイリスク・ハイリターン」といった市場のアノマリーをデータで確認し、後の投資戦略の根拠とします。
- **実装方針**:
    - 分析開始時点の時価総額で全銘柄を階層（例: 上位10%を大型株、次20%を中型株、残り70%を小型株）に分類します。
    - 各階層の時価総額加重平均リターンの推移を計算し、TOPIXと比較可視化します。
    - 縦軸にリターン、横軸にボラティリティ（リターンの標準偏差）をとった散布図を作成し、各階層の特性を比較します。
- **対応ノートブック**: `notebooks/03_市場分析/40_時価総額階層別リターン分析.py` (仮)

### 5. セクター別の時価総額構成比・推移分析

- **目的**: どの産業セクターが市場を牽引しており、時間とともにその勢力図がどう変化しているかを把握します。マクロ経済のトレンドと市場構造の関連性を理解するのに役立ちます。
- **実装方針**:
    - J-Quantsの上場銘柄一覧などから各銘柄に業種（セクター）情報を付与します。
    - セクター別に時価総額を合計し、その構成比の推移を積み上げ面グラフなどで可視化します。
    - 最新時点でのセクター別時価総額の構成比を円グラフやツリーマップで表示します。
- **対応ノートブック**: `notebooks/03_市場分析/50_セクター別時価総額分析.py` (仮)

### 6. 市場の流動性分析 (売買代金)

- **目的**: 市場全体の取引の活発さ（流動性）を把握します。時価総額だけでなく、実際にどれだけの資金が市場で動いているかを確認することは、市場の熱気や投資家の関心を測る上で重要です。
- **実装方針**:
    - 全市場の日次売買代金の合計額の推移を時系列で可視化します。
    - 「時価総額階層」や「セクター」別に売買代金を分析し、どの領域に資金が集中しているかを明らかにします。
- **対応ノートブック**: `notebooks/03_市場分析/60_市場流動性分析.py` (仮)