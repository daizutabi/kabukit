# フェーズ1：市場概観の把握

## 目的

個別銘柄の詳細な分析に入る前に、分析対象である日本株式市場全体のトレンド、規模感、構造をマクロな視点で把握する。このフェーズで得られた知見は、後続の分析フェーズにおける客観的な基準の設定（例：スクリーニング閾値）や、個別銘柄のパフォーマンスを評価する際のベンチマークとして活用する。

---

## 分析項目

以下の3つの観点から市場を可視化し、概観を把握する。

### 1. TOPIXの時系列分析

- **目的**: 市場全体のパフォーマンスを示す代表的なベンチマークの動向を把握する。
- **実装方針**:
    - `JQuantsClient.get_topix()` を使用してTOPIXの日次データを取得する。
    - `altair` を使用し、終値の折れ線グラフを作成して時系列の変動を可視化する。
- **対応ノートブック**: `notebooks/03_市場分析/10_TOPIX推移.py`

### 2. 全銘柄 時価総額合計の推移分析

- **目的**: 株式市場全体の規模（価値の総和）が時系列でどのように変化してきたかを把握する。TOPIX（配当を含まない株価指数）の動きと、実際の市場全体の価値の動きを比較する。
- **実装方針**:
    - 全銘柄の日次株価データと、日次調整済みの発行済株式数を読み込む。
    - 日毎に全銘柄の時価総額を合計する。
    - 計算結果を折れ線グラフで可視化する。可能であれば、TOPIXの推移と重ねて表示し、両者の乖離などを確認する。
- **対応ノートブック**: `notebooks/03_市場分析/20_全銘柄時価総額_推移.py`

### 3. 全銘柄 時価総額の分布分析

- **目的**: 最新時点での市場の構造を把握する。特に、どのような規模の企業（大型株、中型株、小型株）がどれくらいの数存在するのかを理解する。
- **実装方針**:
    - 最新の株価データから全銘柄の時価総額を計算する。
    - `altair` を使用し、ヒストグラムを作成して時価総額の分布を可視化する。時価総額は裾の重い分布となるため、対数スケールでの表示も行う。
    - パーセンタイル値（例: 上位1%、10%、50%など）を計算し、市場の階層構造を定量的に把握する。
- **対応ノートブック**: `notebooks/03_市場分析/30_全銘柄時価総額_分布.py`
